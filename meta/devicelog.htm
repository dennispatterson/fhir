<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>DeviceLog - FHIR v[%version%]</title>

  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="http://hl7.org/fhir" name="author"/>

  <link rel="stylesheet" href="fhir.css"/>


    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="./dist/css/bootstrap.css"/>
  <link rel="stylesheet" href="./assets/css/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="./assets/css/project.css"/>
  <link rel="stylesheet" href="./assets/css/pygments-manni.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="./assets/ico/favicon.png"/>

</head>
<body>
	<div id="segment-header" class="segment">  <!-- segment-header -->	
		<div class="container">  <!-- container -->
			<a id="logo" href="http://hl7.org/fhir"><img alt="logo fhir" src="./assets/images/fhir-logo-www.png"/> </a>
			
			<div id="hl7-nav">
				 <a id="hl7-logo" href="http://www.hl7.org">
					<img height="50" alt="visit the hl7 website" width="42" src="./assets/images/hl7-logo.png"/>
				</a> 
				<a alt="link to hl7 community wiki" href="http://wiki.hl7.org/index.php?title=FHIR_Devicelog_Page">Community Input (wiki)</a> 
			</div>       	
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->	


	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		
 	      		      		
			<div class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
						<span class="icon-bar"/>
						<span class="icon-bar"/>
						<span class="icon-bar"/>
					</button>
					<a class="navbar-brand hidden" href="index.htm">FHIR</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li><a href="index.htm">Home</a></li>
              <li><a href="documentation.htm">Documentation</a></li>
              <li><a href="implementation.htm">Implementation</a></li>
              <li><a href="resourcelist.htm">Resources</a></li>
              <li><a href="clinical.htm">Clinical</a></li>
              <li><a href="administration.htm">Administrative</a></li>
              <li><a href="infrastructure.htm">Infrastructure</a></li>

						</ul>
					</div>  <!-- /.nav-collapse -->
				</div>  <!-- /.container -->
			</div>  <!-- /.navbar -->
      		
				
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	

	<div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
		<div class="container">  <!-- container -->	
			<ul class="breadcrumb">
        <li><a href="index.htm">Home</a></li>
        <li><a href="clinical.htm">Clinical</a></li>        <li><b>DeviceLog</b></li>
			</ul>	
		</div>  <!-- /container -->
	</div>  <!-- /segment-breadcrumb -->
	

	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">

<div class="navtop"><ul class="navtop"><li class="spacerleft"><span>&nbsp;</span></li><li class="selected"><span>Content</span></li><li class="nselected"><span><a href="devicelog-examples.htm">Examples</a></span></li><li class="nselected"><span><a href="devicelog-definitions.htm">Formal Definitions</a></span></li><li class="nselected"><span><a href="devicelog-mappings.htm">Mappings</a></span></li><li class="nselected"><span><a href="devicelog-profiles.htm">Profiles</a></span></li><li class="spacerright"><span>&nbsp;</span></li><li class="wiki"><span><a href="http://wiki.hl7.org/index.php?title=FHIR_devicelog_Page">Community Input (wiki)</a></span></li></ul></div>

<h1>Resource DeviceLog - Content <span class="sectioncount">4.21<a name="4.21"> </a></span></h1>
  <!-- <p class="status">Status: Under Development with the Devices Work Group</p> -->
<p>
A set of raw data produced by a device.
</p>

<p>The resource name as it appears in a  RESTful URL is <a href="http.htm#root">[root]</a>/devicelog/</p>


<p>
There are 4 device related resources
</p>
<ul>
 <li><a href="device.htm">Device</a>  - an administrative resource that tracks individual devices and their location. Primarily used for attribution of actions to devices</li>
 <li><a href="devicecapabilities.htm">Device Capabilities</a> - Defines what observations a device will provide when another system connects to it</li>
 <li>Device Log (this resource) - A raw report from a device at a point in time. Must be paired with the correct Device Capabilities resource in order to be processed</li>
 <li><a href="deviceobservation.htm">Device Observation</a> - A report of observations from a device</li>
</ul>
<p>
The device capabilities and log resources are used when communicating with a device, either directly or indirectly. 
When a channel is opened with the device, or its proxy, it first sends the Capabilities resource, and then a 
series of log resources. The FHIR JSON format is used in this case. (TODO: What's the communication protocol?)
The application that receives the log resources may choose to merge the log with the capabilities 
statement to create a device observation, which is suitable for wider use within a EHR/Clinical record context.
The application that receives the log resources may choose to merge the log with the capabilities 
statement to create a device observation, which is suitable for wider use within a EHR/Clinical record context. 
The Device Capabilities and Device Log resources may be used in a RESTful context, but in many contexts this 
will not be very useful - the data should be converted to a Device Observation for normal RESTful use in a 
patient care context.
</p>

<h3>Structure of the Device Log <span class="sectioncount">4.21.0.1<a name="4.21.0.1"> </a></span></h3>

<p>
A medical device emits a series of these device log resources on a regular basis.
A device log is simply a list of items with a key, a value, and a set of flags.  
The only way to understand the contents of the resource is to match the device log
to the device capabilities that provides the context for interpreting the data
in the device log. The device log can identify the appropriate <a href="devicecapabilities.htm">Device Capabilities</a> resource
explicitly, but generally this is omitted, and the applicable resource is the 
one that is sent prior to any device log resources being sent. The system receiving
the data must keep track of the appropriate <a href="devicecapabilities.htm">Device Capabilities</a> resource.
</p>

<p>
Some devices may be configured to know the identity of the subject of the observations,
so the device log also includes the subject. However many simple devices do not know 
the identity of the subject well, or even at all, and the subject information must be 
provided or completed by the recipient of the device logs based on local context.
</p>
<p>
The device log is a low level resource suitable for direct communication with devices.
The data from the device is usually converted to a <a href="deviceobservation.htm">Device Observation</a> for 
general use in a patient care context. This process is described further below. 
</p>


<h2>
Resource Content
 <span class="sectioncount">4.21.1<a name="4.21.1"> </a></span></h2>
<a name="uml"> </a>
<svg height="98.0" width="672.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1">  <defs>
    <filter id="shadow" height="200%" width="200%" y="0" x="0">
      <feOffset result="offOut" dx="3" dy="3" in="SourceGraphic"/>
      <feColorMatrix result="matrixOut" values="0.2 0 0 0 0 0 0.2 0 0 0 0 0 0.2 0 0 0 0 0 1 0" type="matrix" in="offOut"/>
      <feGaussianBlur result="blurOut" stdDeviation="2" in="matrixOut"/>
      <feBlend in2="blurOut" in="SourceGraphic" mode="normal"/>
    </filter>
  </defs><rect height="78.0" style="fill:#f0f8ff;stroke:black;stroke-width:1" width="200.0" filter="url(#shadow)" rx="4" y="0.0" ry="4" x="0.0"/><line style="stroke:dimgrey;stroke-width:1" y1="28.0" y2="28.0" x2="200.0" x1="0.0"/><text fill="black" class="diagram-class-title  diagram-class-resource" y="20.0" x="100.0">DeviceLog<tspan class="diagram-class-title-link"> (<a class="diagram-class-reference" xlink:href="resources.htm">Resource</a>)</tspan></text><text fill="black" class="diagram-class-detail" y="42.0" x="6.0"><a xlink:href="devicelog-definitions.htm#DeviceLog.instant"><title>The point in time that the values are reported</title>instant</a> : <a xlink:href="datatypes.htm#instant">instant</a> 0..1</text><text fill="black" class="diagram-class-detail" y="56.0" x="6.0"><a xlink:href="devicelog-definitions.htm#DeviceLog.capabilities"><title>An explicit reference  to the capabilities</title>capabilities</a> : <a xlink:href="references.htm#Resource">Resource</a>(<a xlink:href="devicecapabilities.htm#DeviceCapabilities">DeviceCapabilities</a>) 0..1</text><text fill="black" class="diagram-class-detail" y="70.0" x="6.0"><a xlink:href="devicelog-definitions.htm#DeviceLog.subject"><title>The subject of the measurement</title>subject</a> : <a xlink:href="references.htm#Resource">Resource</a>(<a xlink:href="patient.htm#Patient">Patient</a>|<a xlink:href="group.htm#Group">Group</a>|<a xlink:href="device.htm#Device">Device</a>) 0..1</text><rect height="78.0" style="fill:#f0f8ff;stroke:black;stroke-width:1" width="152.0" filter="url(#shadow)" rx="4" y="0.0" ry="4" x="320.0"/><line style="stroke:dimgrey;stroke-width:1" y1="28.0" y2="28.0" x2="472.0" x1="320.0"/><text fill="black" class="diagram-class-title" y="20.0" x="396.0">Item</text><text fill="black" class="diagram-class-detail" y="42.0" x="326.0"><a xlink:href="devicelog-definitions.htm#DeviceLog.item.key"><title>Reference to a device capabilities declaration</title>key</a> : <a xlink:href="datatypes.htm#string">string</a> 1..1</text><text fill="black" class="diagram-class-detail" y="56.0" x="326.0"><a xlink:href="devicelog-definitions.htm#DeviceLog.item.value"><title>The value of the data item, if available. Irrespective of the logical format of the data item, the value is always represented as a string</title>value</a> : <a xlink:href="datatypes.htm#string">string</a> 0..1</text><text fill="black" class="diagram-class-detail" y="70.0" x="326.0"><a xlink:href="devicelog-definitions.htm#DeviceLog.item.flag"><title>Information about the quality of the data etc (this element modifies the meaning of other elements)</title>flag</a> : <a xlink:href="datatypes.htm#code">code</a> 0..* &lt;&lt;<a xlink:href="device-value-flag.htm"><title>Flags that supply information about the status of a device reading</title>DeviceValueFlag</a>&gt;&gt;</text><line style="stroke:navy;stroke-width:1" y1="39.0" y2="39.0" x2="320.0" x1="200.0"/><polygon transform="rotate(0.0 200.0 39.0)" style="fill:navy;stroke:navy;stroke-width:1" points="200.0,39.0 206.0,43.0 212.0,39.0 206.0,35.0 200.0,39.0"/><rect height="18.0" style="fill:white;stroke:black;stroke-width:0" width="16.0" y="32.0" x="252.0"/><text fill="black" class="diagram-class-linkage" y="42.0" x="260.0"><a xlink:href="devicelog-definitions.htm#DeviceLog.item"><title>An item of data that the device produces</title>item</a></text><text fill="black" class="diagram-class-linkage" y="35.0" x="300.0">0..*</text></svg>

<a name="def"> </a>
<a name="devicelog"> </a>
<a name="DeviceLog"> </a>
<pre class="spec">
&lt;<a title="A set of raw data produced by a device." class="dict" href="devicelog-definitions.htm#DeviceLog"><b>DeviceLog</b></a> xmlns=&quot;http://hl7.org/fhir&quot;&gt;
 &lt;!-- from <a href="resources.htm">Resource</a>: <a href="extensibility.htm">extension</a>, <a href="narrative.htm#Narrative">narrative</a>, and <a href="references.htm#contained">contained</a> --&gt;
 &lt;<a title="The point in time that the values are reported." class="dict" href="devicelog-definitions.htm#DeviceLog.instant"><b>instant</b></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.htm#instant">instant</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy">When the data values are reported</span><span style="color: Gray"> --&gt;</span>
 &lt;<a title="An explicit reference  to the capabilities." class="dict" href="devicelog-definitions.htm#DeviceLog.capabilities"><b>capabilities</b></a>&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: darkgreen"><a href="references.htm#Resource">Resource</a>(<a href="devicecapabilities.htm#DeviceCapabilities">DeviceCapabilities</a>)</span> <span style="color: navy">Explicit reference to the capabilities</span><span style="color: Gray"> --&gt;</span>&lt;/capabilities&gt;
 &lt;<a title="The subject of the measurement." class="dict" href="devicelog-definitions.htm#DeviceLog.subject"><b>subject</b></a>&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: darkgreen"><a href="references.htm#Resource">Resource</a>(<a href="patient.htm#Patient">Patient</a>|<a href="group.htm#Group">Group</a>|<a href="device.htm#Device">Device</a>)</span> <span style="color: navy">Subject of the measurement</span><span style="color: Gray"> --&gt;</span>&lt;/subject&gt;
 &lt;<a title="An item of data that the device produces." class="dict" href="devicelog-definitions.htm#DeviceLog.item"><b>item</b></a>&gt;  <span style="color: Gray">&lt;!-- <span style="color: brown"><b>0..*</b></span> An item of data --&gt;</span>
  &lt;<a title="Reference to a device capabilities declaration." class="dict" href="devicelog-definitions.htm#DeviceLog.item.key"><b>key</b></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.htm#string">string</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>1..1</b></span> <span style="color: navy">Reference to device capabilities declaration</span><span style="color: Gray"> --&gt;</span>
  &lt;<a title="The value of the data item, if available. Irrespective of the logical format of the data item, the value is always represented as a string." class="dict" href="devicelog-definitions.htm#DeviceLog.item.value"><b>value</b></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.htm#string">string</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..1</b></span> <span style="color: navy">The value of the data item, if available</span><span style="color: Gray"> --&gt;</span>
  &lt;<a title="Information about the quality of the data etc (this element modifies the meaning of other elements)" class="dict" href="devicelog-definitions.htm#DeviceLog.item.flag"><span style="text-decoration: underline"><b>flag</b></span></a> value=&quot;[<span style="color: darkgreen"><a href="datatypes.htm#code">code</a></span>]&quot;/&gt;<span style="color: Gray">&lt;!--</span> <span style="color: brown"><b>0..*</b></span> <span style="color: navy"><a style="color: navy" href="device-value-flag.htm">Information about the quality of the data etc</a></span><span style="color: Gray"> --&gt;</span>
 &lt;/item&gt;
&lt;/DeviceLog&gt;
</pre>


<p>Alternate definitions: <a href="devicelog.xsd">Schema</a>/<a href="devicelog.sch">Schematron</a>, 
<a href="devicelog.profile.xml.htm">Resource Profile</a></p>

<a name="tx"> </a>
<h3>
Terminology Bindings
 <span class="sectioncount">4.21.1.1<a name="4.21.1.1"> </a></span></h3>
<table class="grid">
 <tr><th>Path</th><th>Definition</th><th>Type</th><th>Reference</th></tr>
 <tr><td title="DeviceValueFlag" valign="top">DeviceLog.item.flag </td><td valign="top">Flags that supply information about the status of a device reading</td><td><a href="terminologies.htm#code">Fixed</a></td><td valign="top"><a href="device-value-flag.htm">http://hl7.org/fhir/device-value-flag</a></td> </tr>
</table>
<p> </p>






<h3>Converting Device Logs to Device Observations <span class="sectioncount">4.21.1.2<a name="4.21.1.2"> </a></span></h3>
<p>
A device log has little context, and does not have the full context to support integrating 
the data into the patient record. The usual process for feeding the data from the device 
log resource into the patient record is to convert it to a <a href="deviceobservation.htm">Device Observation</a>.
</p>
<p>
To convert the data from a Device Log to a Device Observation:
</p>
<ul>
 <li>Locate the matching Device Capabilities resource (may be referred to explicitly in the log, but is also sent explicitly by the machine each time a system connects to it)</li>
 <li>Use the key values on the device log to identify the relevant metric or facet for each item</li>
 <li>Use the information for the metric or facet to build a set of <a href="observation.htm">observation</a> resources (see below)</li>
 <li>Create a device observation that provides the device context for the observations</li>
 <li>Fill out the missing information (device identity, subject, etc.). This information may be 
   explicit in the device capabilities and device log resources, but the simpler the device, the more likely it must come from local context/configuration</li>
 <li>Submit the device observation to the patient record</li>
</ul>
<p><b>Converting a Data Item to an Observation</b></p>
<p>
Between the Device Item and the matching Device Capabilities information, the following information is provided:
</p>
<ul>
 <li>metric or facet code - the code for the observation</li>
 <li>data item value</li>
 <li>data type </li>
 <li>additional information to complete the data type</li>
 <li>a set of flags</li>
</ul>
<p>
The following table describes how to convert from value to the correct data type:
</p>
<table class="grid">
 <tr>
  <th>Data Type</th>
  <th>Description</th>
  <th>Template</th>
 </tr> 
 <tr>
  <td><a href="datatypes.htm#Quantity">Quantity</a></td>
  <td>The common case. The device capabilities provides a units, and optionally a UCUM code</td>
  <td>
   <pre>
    &lt;valueQuantity&gt;
      &lt;value value=&quot;[data item value]&quot; /&gt;
      [ (if appropriate from flags) &lt;comparator value=&quot;??&quot; /&gt; ]
      &lt;units value=&quot;[units]&quot; /&gt;
	    [ (if UCUM code provided)
        &lt;system value=&quot;http://unitsofmeasure.org&quot; /&gt;
        &lt;code value=&quot;[UCUM]&quot; /&gt;
      ]
    &lt;/valueQuantity&gt;
   </pre>
  </td>
 </tr> 
 <tr>
  <td><a href="datatypes.htm#Coding">Coding</a></td>
  <td>When the output is a choice of one of a set of discrete values.<br/>The system should be a reference to some locatable definition of the values so that display names can be resolved</td>
  <td>
   <pre>
    &lt;valueCoding&gt;
      &lt;system value=&quot;[system]&quot; /&gt;
      &lt;code value=&quot;[data item value]&quot; /&gt;
    &lt;/valueCoding&gt;
   </pre>
  </td>
 </tr> 
 <tr>
  <td><a href="datatypes.htm#string">string</a></td>
  <td>The output should be treated as a simple string</td>
  <td>
   <pre>
    &lt;valueString value=&quot;[data item value]&quot;/&gt;
   </pre>
  </td>
 </tr> 
</table>
<p>The following table summarizes the interpretation of the possible flags</p>
<table class="grid">
 <tr>
  <th>Flag</th>
  <th>Interpretation</th>
 </tr> 
 <tr>
  <td>ok, ongoing, early, questionable, calibrating, error, unknown</td>
  <td>The flags have the same meaning on the observation.reliability element</td>
 </tr>
 <tr>
  <td>test, demo, alarm, alarm-off</td>
  <td>These flags have no representation in the observation resource</td>
 </tr>
 <tr>
  <td>under, over</td>
  <td>These flags map to the Quantity.comparator element</td>
 </tr>
</table>

<p>
Generally, as a rule of thumb, metrics and facets are components of the observation. 
</p>




<a name="search"> </a>
<h2>Search Parameters <span class="sectioncount">4.21.2<a name="4.21.2"> </a></span></h2>
<p>Search Parameters for RESTful searches. The standard parameters also apply. See <a href="query.htm#base">Searching</a> for more information.</p>
<table class="list">
<tr><td><b>Name / Type</b></td><td><b>Description</b></td><td><b>Paths</b></td></tr>
<tr><td>_id : token</td><td>The logical resource id associated with the resource (must be supported by all servers)</td><td/></tr>
<tr><td>capabilities : reference</td><td>Explicit reference to the capabilities</td><td>DeviceLog.capabilities</td></tr>
<tr><td>flag : token</td><td>Information about the quality of the data etc</td><td>DeviceLog.item.flag</td></tr>
<tr><td>instant : date</td><td>When the data values are reported</td><td>DeviceLog.instant</td></tr>
<tr><td>key : token</td><td>Reference to device capabilities declaration</td><td>DeviceLog.item.key</td></tr>
<tr><td>subject : reference</td><td>Subject of the measurement</td><td>DeviceLog.subject</td></tr>
<tr><td>value : token</td><td>The value of the data item, if available</td><td>DeviceLog.item.value</td></tr>
</table>



</div>


				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2011 - 2013. FHIR v0.11-1711 generated on Tue, Aug 13, 2013 07:56+1000. <a href="license.htm">License</a>. <a href="qa.htm">QA Report</a>
        <br/>
        <span style="color: #FFFF77">
        Warning: This version of FHIR is the <a href="ballot-intro.htm">DSTU ballot</a>, and the stable version for the September/October connectathons. 
        Implementers are welcome to experiment with the content defined here, but should note that the contents are subject to change without prior notice.
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->
	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"/>
<script src="./dist/js/bootstrap.min.js"/>
<script src="./assets/js/respond.min.js"/>

<script src="./assets/js/fhir.js"/>

  <!-- Analytics Below
================================================== -->

    
</body>
</html>