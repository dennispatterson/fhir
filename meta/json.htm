<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>Roadmap - FHIR v0.11</title>

  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="http://hl7.org/fhir" name="author"/>

  <link rel="stylesheet" href="fhir.css"/>


    <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="./dist/css/bootstrap.css"/>
  <link rel="stylesheet" href="./assets/css/bootstrap-fhir.css"/>

    <!-- Project extras -->
  <link rel="stylesheet" href="./assets/css/project.css"/>
  <link rel="stylesheet" href="./assets/css/pygments-manni.css"/>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- [if lt IE 9]>
  <script src="./assets/js/html5shiv.js"></script>
  <script src="./assets/js/respond.min.js"></script>
  <![endif] -->

    <!-- Favicons -->
  <link sizes="144x144" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-144-precomposed.png"/>
  <link sizes="114x114" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-114-precomposed.png"/>
  <link sizes="72x72" rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-72-precomposed.png"/>
  <link rel="apple-touch-icon-precomposed" href="./assets/ico/apple-touch-icon-57-precomposed.png"/>
  <link rel="shortcut icon" href="./assets/ico/favicon.png"/>

</head>
<body>
	<div id="segment-header" class="segment">  <!-- segment-header -->	
		<div class="container">  <!-- container -->
			<a id="logo" href="http://hl7.org/fhir"><img alt="logo fhir" src="./assets/images/fhir-logo-www.png"/> </a>
			
			<div id="hl7-nav">
				 <a id="hl7-logo" href="http://www.hl7.org">
					<img height="50" alt="visit the hl7 website" width="42" src="./assets/images/hl7-logo.png"/>
				</a> 
				<a alt="link to hl7 community wiki" href="http://wiki.hl7.org/index.php?title=FHIR_Json_Page">Community Input (wiki)</a> 
			</div>       	
		</div>
		<div class="container">  <!-- container -->
	</div></div>  <!-- /segment-header -->	


	<div id="segment-navbar" class="segment">  <!-- segment-navbar -->
		<div id="stripe"> </div>
		<div class="container">  <!-- container -->
   <!-- HEADER CONTENT -->
 	      		
 	      		      		
			<div class="navbar navbar-inverse">
				<div class="container">
					<button data-target=".navbar-inverse-collapse" class="navbar-toggle" data-toggle="collapse" type="button">
						<span class="icon-bar"/>
						<span class="icon-bar"/>
						<span class="icon-bar"/>
					</button>
					<a class="navbar-brand hidden" href="index.htm">FHIR</a>
					<div class="nav-collapse collapse navbar-inverse-collapse">
						<ul class="nav navbar-nav">
              <li><a href="index.htm">Home</a></li>
              <li><a href="documentation.htm">Documentation</a></li>
              <li><a href="implementation.htm">Implementation</a></li>
              <li><a href="resourcelist.htm">Resources</a></li>
              <li><a href="clinical.htm">Clinical</a></li>
              <li><a href="administration.htm">Administrative</a></li>
              <li><a href="infrastructure.htm">Infrastructure</a></li>

						</ul>
					</div>  <!-- /.nav-collapse -->
				</div>  <!-- /.container -->
			</div>  <!-- /.navbar -->
      		
				
  <!-- /HEADER CONTENT -->				
		</div>  <!-- /container -->
	</div>  <!-- /segment-navbar -->
	

	<div id="segment-breadcrumb" class="segment">  <!-- segment-breadcrumb -->
		<div class="container">  <!-- container -->	
			<ul class="breadcrumb">
        <li><a href="index.htm">Home</a></li>
        <li><a href="documentation.htm">Documentation</a></li>        <li><a href="resources.htm">Resource Definitions</a></li>        <li><a href="formats.htm">Formats</a></li>        <li><b>JSON</b></li>
			</ul>	
		</div>  <!-- /container -->
	</div>  <!-- /segment-breadcrumb -->
	

	<div id="segment-content" class="segment">  <!-- segment-content -->
	<div class="container">  <!-- container -->
            <div class="row">
            	<div class="inner-wrapper">
  <!-- CONTENT CONTENT -->


<div class="col-9">


<a name="json"> </a>
<h2>Representing Resources in JSON <span class="sectioncount">1.10.4.2<a name="1.10.4.2"> </a></span></h2>
<p>
Though the representation of FHIR resources is described in XML, FHIR also defines
a JSON representation of the resources. The JSON format for the resources follows 
the standard XML format very closely to make interconversion easy, and so that 
XPath queries can easily be mapped to query the JSON structures. The formal mime type
for this format is application/fhir+json.
</p>
<p>
Clients are free to choose whether to implement in XML or JSON. Servers must support XML, and can 
choose to support JSON. Note that systems must declare which format(s) they 
support. Also, the <a href="downloads.htm#refimpl">reference implementations</a>
include bi-direction conversion functionality between the two formats.
</p>
<p>
The JSON representation is described relative to the XML representation:
</p>
<ul>
 <li>The names for the JSON object members are the same as the names of the elements and attributes in XML, including for elements that may repeat. Property names are case sensitive</li>
 <li>In the data types, the <a href="datatypes.htm#primitive">primitive type</a> integer is represented using a native JSON int, while boolean is represented using JSON's &quot;true&quot; and &quot;false&quot; values. Other primitive types such as string, decimal, etc. are represented as a JSON string, using the same serialization as the XML form (including instant, which is represented as plain text, not in one of the proposed JSON custom date formats)</li>
 <li>Just as in XML, JSON property attributes never have empty values; omit a value if it is empty</li>
</ul>

<p>There are differences too:</p>
<ul>
 <li>There are no namespaces in the JSON representation</li>
 <li>The order of properties of an object not significant in the JSON representation, though order within an array must be maintained</li>
 <li>JSON does not have a notion of attributes versus elements, so attributes (xml:id, value) are treated as JSON object members (see below for more details)</li>
 <li>JSON has a notation for arrays, which are used to represent repeating elements. Note that this is the case, even if they do not repeat in the actual instance</li>
 <li>The XHTML &lt;div&gt; element in the Narrative datatype is represented as a single escaped string of XHTML. This is to avoid problems in JSON with mixed content etc. The XHTML most still conform to the rules described above</li>
</ul>
<p>These differences - particularly the repeating element one, which cannot be avoided - mean that generic XML --&gt; JSON converters are not 
able to perform correctly. The <a href="downloads.htm#refimpl">reference platforms</a> provide XML &lt;--&gt; JSON conversion functionality that accommodates these FHIR-specific characteristics.</p>

<h3>JSON representation of primitive elements <span class="sectioncount">1.10.4.2.1<a name="1.10.4.2.1"> </a></span></h3>
<p>
FHIR elements with primitive values are represented as a JSON object of the same name with a the value attribute of the element in a &quot;value&quot; property and  
(optionally) &quot;_id&quot; for the id attribute.  JSON native types are used for boolean, integer and decimal, all other primitives are rendered as strings, and the 
whitespace is always significant (i.e. no leading and trailing spaces for non-strings). The JSON value &quot;null&quot; is never used.</p>

<pre class="xml">
 &lt;<b>date</b> value=&quot;1972-11-30&quot;/&gt;
 &lt;<b>deceased</b> value=&quot;false&quot; /&gt;
 &lt;<b>count</b> value=&quot;23&quot; /&gt;
</pre>
<p>is represented in JSON as</p>
<pre class="json">
 &quot;date&quot; : { value: &quot;1972-11-30&quot; }
 &quot;deceased&quot; : { value: false }
 &quot;count&quot; : { value: 23 }
</pre>
<p>
 All XML elements <i>can</i> have an 'id' attribute, which is represented in JSON as a property of name &quot;_id&quot;:
</p>
<pre class="xml">
 &lt;<b>dob</b> id=&quot;314159&quot; value=&quot;1972-11-30&quot; /&gt;
</pre>
<p>is represented in JSON as:</p>
<pre class="json">
 &quot;dob&quot;: { 
   &quot;_id&quot;: &quot;314159&quot;, 
   &quot;value&quot;: &quot;1972-11-30&quot; 
 }
</pre>

<h3>Repeating elements <span class="sectioncount">1.10.4.2.2<a name="1.10.4.2.2"> </a></span></h3>

<p>Repeating elements are rendered within a JSON array with the name of the element, 
so a repeating &lt;dob&gt; element in XML</p>
<pre class="xml">
 &lt;<b>dob</b> value=&quot;2011-11-30&quot; /&gt;
 &lt;<b>dob</b> id=&quot;314159&quot; value=&quot;1972-11-30&quot; /&gt;
</pre>
<p>is represented in JSON like so:</p>
<pre class="json">
&quot;dob&quot;: [
	{ &quot;value&quot;: &quot;2011-11-30&quot; },
	{ &quot;_id&quot;: &quot;314159&quot;, &quot;value&quot;: &quot;1972-11-30&quot; }
  ]
</pre>

<h3>JSON representation of Resources, Elements, and Data types <span class="sectioncount">1.10.4.2.3<a name="1.10.4.2.3"> </a></span></h3>

<p>
Resources, elements, and datatypes (types that contain named elements of other types) are represented using 
a JSON object, containing a member for each element in the datatype. Composites can have id attributes, which are 
converted to JSON members values, in the same manner as described for primitives. It comes before all other members. For example:</p>
 <pre class="xml">
&lt;Person&gt;
  &lt;name&gt;
    &lt;use value=&quot;official&quot; /&gt;  
    &lt;given value=&quot;Karen&quot; /&gt;
    &lt;family id=&quot;n1&quot; value=&quot;Van&quot; /&gt;
  &lt;/name&gt;
  &lt;text&gt;
    &lt;status value=&quot;generated&quot; /&gt;
    &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;...&lt;/div&gt;
  &lt;/text&gt;
&lt;/Person&gt;
</pre>
<p>is represented in JSON as:</p>
<pre class="json">
{
  &quot;Person&quot; : {
    &quot;name&quot; : [{
      &quot;use&quot; : { &quot;value&quot; : &quot;official&quot; },
      &quot;given&quot; : [{
         &quot;value&quot; : &quot;Karen&quot; 
        }],
      &quot;family&quot; : [{
         &quot;_id&quot; : &quot;n1&quot;,
         &quot;value&quot; : &quot;van&quot;
        }]
     }],
    &quot;text&quot; : {
      &quot;status&quot; : { &quot;value&quot; : &quot;generated&quot; },
      &quot;div&quot; : &quot;&lt;div xmlns='http://www.w3.org/1999/xhtml'&gt;...&lt;/div&gt;&quot;
    }
}
</pre>
<p>Things to note here are:</p>
<ul>
<li>Both given and family are repeating XML elements, so they are serialised as an Array whether or not they repeat in this instance</li>
<li>Because the primitive element 'id' is in a resource, it is serialized as a JSON object</li>
<li>In the family part of 'name', the '_id' is added as the first member</li>
<li>The XHTML content in the 'div' element which is in the Narrative element 'text' is represented 
as an escaped string in the value property in JSON. The xhtml's root element needs to be a &lt;div&gt; in the xhtml namespace</li>
</ul>

<a name="bundle"> </a>
<a name="atom"> </a>
<a name="json-bundles"/>
<h3>JSON Bundle Representation <span class="sectioncount">1.10.4.2.4<a name="1.10.4.2.4"> </a></span></h3>

<p>
In JSON <a href="extras.htm#bundle">bundles</a> are represented using a JSON format that is tailored to the specific needs for bundles. 
Each element in the Xml feed definition has a JSON corresponding JSON object member with the same name. 
Here is an example feed returning search results for a person query:
</p>

<pre class="json">
{
  &quot;feed&quot; : {
    &quot;title&quot; : &quot;Search result&quot;,
    &quot;updated&quot; : &quot;2012-09-20T12:04:45.6787909+00:00&quot;,
    &quot;id&quot; : &quot;urn:uuid:50ea3e5e-b6a7-4f55-956c-caef491bbc08&quot;,
    &quot;link&quot; : [{
      &quot;rel&quot; : &quot;self&quot;,
	  &quot;href&quot; : &quot;http://ip-0a7a5abe:16287/fhir/person?format=json&quot;
    }],
    &quot;category&quot; : [{
      &quot;term&quot; : &quot;[Tag Uri]&quot;,
      &quot;label&quot; : &quot;[Tag Label]&quot;,
      &quot;scheme&quot; : &quot;http://hl7.org/fhir/tag&quot;
    }],
    &quot;totalResults&quot; : 12,
    &quot;entry&quot; : [{
      &quot;title&quot; : &quot;Resource of type Person, with id = 1 and version = 1&quot;,
      &quot;link&quot; : [{
        &quot;rel&quot; : &quot;self&quot;,
        &quot;href&quot; : &quot;http://fhir.furore.com/fhir/person/@1/history/@1&quot;
      }],
      &quot;id&quot; : &quot;http://fhir.furore.com/fhir/person/@1&quot;,
      &quot;updated&quot; : &quot;2012-05-29T23:45:32+00:00&quot;,
      &quot;published&quot; : &quot;2012-09-20T12:04:47.3012429+00:00&quot;,
      &quot;author&quot; : [{
        &quot;name&quot; : &quot;Grahame Grieve / HL7 publishing committee&quot;
      }],
      &quot;category&quot; : [{
        &quot;term&quot; : &quot;[Tag Uri]&quot;,
        &quot;label&quot; : &quot;[Tag Label]&quot;,
        &quot;scheme&quot; : &quot;http://hl7.org/fhir/tag&quot;
      }],
      &quot;content&quot; : {
        &quot;Person&quot; : { ...person content in JSON... }
      },
      &quot;summary&quot; : &quot;&lt;div xmlns=\&quot;http://www.w3.org/1999/xhtml\&quot;&gt;(text summary)&lt;/div&gt;&quot;,
    },
    ... other entries ....
    ]
  }
}
</pre>

<p>
Note that property names for elements that can repeat are not pluralized for consistency of overall approach. The mime type for a json bundle is also application/fhir+json.
</p>

<a name="json-bundle-delete"> </a>
<h4>Bundling versions - deletion <span class="sectioncount">1.10.4.2.4.1<a name="1.10.4.2.4.1"> </a></span></h4>
<p>
When returning a set of versions for a resource, a version might indicate a <i>deletion</i>. 
While the XML format follows <a href="http://www.rfc-editor.org/rfc/rfc6721.txt">RFC 6721</a>,
the JSON format needs to use an entry item to retain the logical order of entries:</p>
<pre class="json">
   .. feed ..
   &quot;entry&quot; : [
    ... other entries ....,    
    {
      &quot;deleted&quot; : &quot;2012-05-29T23:45:32+00:00&quot;,
      &quot;id&quot; : &quot;http://fhir.furore.com/fhir/person/@1&quot;,
      &quot;link&quot; : [{
          &quot;rel&quot; : &quot;self&quot;,
          &quot;href&quot; : &quot;http://fhir.furore.com/fhir/person/@1/history/@1&quot;
        }],
    }, ... other entries ....
  ]
  ... feed ...
</pre>
<p>
The entry is known to be deleted because a date of deletion is given. An id must be provided, and a link may be provided.
</p>

<a name="binary"> </a>
<h4>Binary Resources <span class="sectioncount">1.10.4.2.4.2<a name="1.10.4.2.4.2"> </a></span></h4>
<p>
There are situations where it is useful or required to handle pure binary content 
as resources. Typically, this is when the binary content is referred to from other FHIR 
Resources. The resource can contain any content, whether text, image, pdf, zip archive, etc. 
These resources are <a href="http.htm#binary">served in their native form on the rest interface</a>,
but can also be represented in XML or JSON, such as when including these resources in a bundle
(used when it is convenient to include these in the feed directly rather than leaving them by reference).
</p>
<p>
In JSON, Binary resources are represented like this:
</p>
<pre class="json">
  &quot;Binary&quot; : {
    &quot;contentType&quot; : &quot;[mime type]&quot;,
    &quot;content&quot; : &quot;[base64 of data]&quot;
  }
</pre>

</div>
<div class="col-3"><div class="itoc">
<p>On This Page:</p>
<p class="link"><a href="#root">Resource Definition</a></p><p class="link"><a href="#Narrative">Narrative</a></p><p class="link"><a href="#idref">Internal References</a></p><p class="link"><a href="#json">JSON</a></p><p class="link"><a href="#atom">Atom (Bundle)</a></p><p class="link"><a href="#json-bundles">JSON (Bundle)</a></p><p class="link"><a href="#schema">Schema</a></p>
</div></div>



				</div>  <!-- /inner-wrapper -->
            </div>  <!-- /row -->
        </div>  <!-- /container -->
    </div>  <!-- /segment-content -->


	<div id="segment-footer" class="segment">  <!-- segment-footer -->
		<div class="container">  <!-- container -->
			<div class="inner-wrapper">
				<p>
        &copy; HL7.org 2011 - 2013. FHIR v0.11-1711 generated on Tue, Aug 13, 2013 07:57+1000. <a href="license.htm">License</a>. <a href="qa.htm">QA Report</a>
        <br/>
        <span style="color: #FFFF77">
        Warning: This version of FHIR is the <a href="ballot-intro.htm">DSTU ballot</a>, and the stable version for the September/October connectathons. 
        Implementers are welcome to experiment with the content defined here, but should note that the contents are subject to change without prior notice.
        </span>
        </p>
			</div>  <!-- /inner-wrapper -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-footer -->
	
	<div id="segment-post-footer" class="segment hidden">  <!-- segment-post-footer -->
		<div class="container">  <!-- container -->
		</div>  <!-- /container -->
	</div>  <!-- /segment-post-footer -->
    
      <!-- JS and analytics only. -->
      <!-- Bootstrap core JavaScript
================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
<script src="./assets/js/jquery.js"/>
<script src="./dist/js/bootstrap.min.js"/>
<script src="./assets/js/respond.min.js"/>

<script src="./assets/js/fhir.js"/>

  <!-- Analytics Below
================================================== -->

</body>
</html>